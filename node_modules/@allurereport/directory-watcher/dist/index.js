import { watch as chokidarWatch } from "chokidar";
import console from "node:console";
const watchDirectory = (directory, handler, options = {}) => {
    const { usePolling = false, ignoreInitial = false } = options;
    const watcher = chokidarWatch(directory, { persistent: true, usePolling, ignoreInitial });
    watcher.on("all", async (eventName, path) => {
        await handler(eventName, path);
    });
    watcher.on("error", (error) => {
        console.log("error", error);
    });
    return () => watcher.close();
};
export default watchDirectory;
export { newFilesInDirectoryWatcher, allureResultsDirectoriesWatcher, delayedFileProcessingWatcher, } from "./watcher.js";
