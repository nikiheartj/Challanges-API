import { findByLabelName } from "./label.js";
export const createTestPlan = (testResults) => {
    const seenIds = new Set();
    const seenSelectors = new Set();
    const tests = testResults
        .map((tr) => ({ selector: tr.runSelector ?? tr.fullName, id: findByLabelName(tr.labels, "ALLURE_ID") }))
        .filter((value) => (value.selector && (seenSelectors.has(value.selector) ? false : !!seenSelectors.add(value.selector))) ||
        (value.id && (seenIds.has(value.id) ? false : !!seenSelectors.add(value.id))));
    return {
        version: "1.0",
        tests,
    };
};
